<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="js/numeric-1.2.6.min.js"></script>
    <script type='text/javascript' src='js/DAT.GUI.min.js'></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/site.css">

    <script src="js/bootstrap.min.js"></script>
    <!--[if IE]><script src="excanvas.js"></script><![endif]-->
    <script type="text/javascript" src="js/dygraph-combined.js"></script> 
  </head>
  <body>

<h1><center>Hybrid Qubit</center></h1>
<table>
<tr>
  <div id="demodiv"></div></tr>
  <tr><div id="legend_div" style="width:80%; font-size:3.em; padding-top:5px;"></div></tr>
  </table>
   <script type="text/javascript">
      var plot;  // defined below
      var delta1 = 1;
      var delta2 = 1;
      var delta3 = 1;
      var delta4 = 1;
      var dEL = 1;
      var dER = 1;
      plot = function() {

        var graph = document.getElementById("demodiv");
        var width = window.innerWidth/15;
        var x1 = -5;
        var x2 = 5;
        var xs = 1.0 * (x2 - x1) / width;
        //window.alert(xs)

        var data = [];
        //data.push();
        for (var i = 0; i < width; i++) {
          var x = x1 + i * xs;
          var E1L = Math.sqrt(4*Math.pow(delta2,2)+Math.pow((dER-x),2))
          var Heff = [[-x/2-(Math.pow(delta1,2)*(E1L-dER+x)/(E1L*(E1L+dER+x))), delta1*Math.sqrt(E1L+dER-x)/Math.sqrt(2*E1L)],[delta1*Math.sqrt(E1L+dER-x)/Math.sqrt(2*E1L),(dER-E1L)/2]]
          var H = [[x/2.,0.,delta1,-delta2],[0.,x/2.+dEL,-delta3,delta4],[delta1,-delta3,-x/2.,0.],[-delta2,delta4,0.,-x/2.+dER]]
          var evEff = numeric.eig(Heff);
          var ev = numeric.eig(H);
          //ev.push(numeric.eig(Heff));
          //window.alert(ev)
          //window.alert(
          function compareNumbers(a, b)
		  {
    	      return a - b;
          }
          var y = ev.lambda.x;
		  y = y.sort(compareNumbers);
          var yEff = evEff.lambda.x;
          yEff = yEff.sort(compareNumbers);
          for (var j = 0; j < yEff.length; j++) {
              y.push(yEff[j]);
              var val = parseFloat(yEff);
			  if(isNaN(val)){
			  	  //window.alert(Heff)
			  	  }
            }
          //y.push(evEff.lambda.x);
          var row = [x];
          if (y.length > 0) {
            for (var j = 0; j < y.length; j++) {
              row.push(y[j]);
            }
          } else {
            row.push(y);
          }
          data.push(row);
        }

        g = new Dygraph(graph, data,
      {
        //rollPeriod: 14,
        //showRoller: true,
        //customBars: true,
       // title: 'Hybrid Qubit',
        ylabel: 'Energy',
        xlabel: 'Detuning',
        gridLineColor: '#FFFFFF',
        labelsDiv: document.getElementById('legend_div'),
        labels: ['Detuning','0','1','2','3','Approximate 0','Approximate 1'],
        'Approximate 0':{
                  strokePattern: Dygraph.DASHED_LINE
                },
        'Approximate 1':{
                  strokePattern: Dygraph.DASHED_LINE
                }
        //legend: 'always'
      }
);
      };
      plot();

 //   g = new Dygraph(
 //     document.getElementById("graph_div"),
 //     "ny-vs-sf.txt",
 //     {
 //       rollPeriod: 14,
 //       showRoller: true,
 //       customBars: true,
 //       title: 'NYC vs. SF',
 //       ylabel: 'Temperature (F)',
 //       legend: 'always'
 //     }
 //   );
    gui = new dat.GUI();
    gui_delta1 = gui.add( this, 'delta1' ).min(0).max(5).step(0.01).name('Delta_1 = ');
	gui_delta1.onChange( function(value) { plot(); } );
	gui_delta1.setValue(1);
	gui_delta2 = gui.add( this, 'delta2' ).min(0).max(5).step(0.01).name('Delta_2 = ');
	gui_delta2.onChange( function(value) { plot(); } );
	gui_delta2.setValue(1);
	gui_delta3 = gui.add( this, 'delta3' ).min(0).max(5).step(0.01).name('Delta_3 = ');
	gui_delta3.onChange( function(value) { plot(); } );
	gui_delta3.setValue(1);
	gui_delta4 = gui.add( this, 'delta4' ).min(0).max(5).step(0.01).name('Delta_4 = ');
	gui_delta4.onChange( function(value) { plot(); } );
	gui_delta4.setValue(1);
	gui_dEL = gui.add( this, 'dEL' ).min(0).max(5).step(0.01).name('DEL = ');
	gui_dEL.onChange( function(value) { plot(); } );
	gui_dEL.setValue(1);
	gui_dER = gui.add( this, 'dER' ).min(0).max(5).step(0.01).name('DER = ');
	gui_dER.onChange( function(value) { plot(); } );
	gui_dER.setValue(1);
  </script>
 

  </body>
</html>